<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Running An Existing Model · DSGE.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="../index.html"><img class="logo" src="../assets/logo.png" alt="DSGE.jl logo"/></a><h1>DSGE.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../model_design/">Model Design</a></li><li class="current"><a class="toctext" href>Running An Existing Model</a><ul class="internal"><li><a class="toctext" href="#Running-with-Default-Settings-1">Running with Default Settings</a></li><li><a class="toctext" href="#Input/Output-Directory-Structure-1">Input/Output Directory Structure</a></li><li><a class="toctext" href="#The-PoolModel-Type-1">The <code>PoolModel</code> Type</a></li></ul></li><li><a class="toctext" href="../advanced_usage/">Advanced Usage</a></li><li><a class="toctext" href="../input_data/">Input Data</a></li><li><a class="toctext" href="../frbny_data/">FRBNY Model Input Data</a></li><li><a class="toctext" href="../implementation_details/">Implementation Details</a></li><li><a class="toctext" href="../solving/">Solving the Model</a></li><li><a class="toctext" href="../estimation/">Estimation</a></li><li><a class="toctext" href="../forecast/">Forecasting</a></li><li><a class="toctext" href="../irf/">Impulse Response Functions</a></li><li><a class="toctext" href="../means_bands/">Computing Means and Bands</a></li><li><a class="toctext" href="../altpolicy/">Alternative Policies</a></li><li><a class="toctext" href="../scenarios/">Alternative Scenarios</a></li><li><a class="toctext" href="../plotting/">Plotting</a></li><li><a class="toctext" href="../algorithms/">Algorithms</a></li><li><a class="toctext" href="../contributing/">Contributing to DSGE.jl</a></li><li><a class="toctext" href="../MatlabToJuliaTransition/">MATLAB to Julia Transition: Estimation</a></li><li><a class="toctext" href="../julia_forecasting/">MATLAB to Julia Transition: Forecast</a></li><li><a class="toctext" href="../license/">License</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Running An Existing Model</a></li></ul><a class="edit-page" href="https://github.com/FRBNY-DSGE/DSGE.jl/blob/master/docs/src/running_existing_model.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Running An Existing Model</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Running-an-Existing-Model-1" href="#Running-an-Existing-Model-1">Running an Existing Model</a></h1><p>The DSGE.jl package provides several example models:</p><ul><li>A simple three-equation DSGE model from <a href="https://sites.sas.upenn.edu/schorf/files/er-final.pdf">An and Schorfheide (2006)</a></li><li>The well-known <a href="https://www.aeaweb.org/articles?id=10.1257/aer.97.3.586">Smets and Wouters (2007)</a> model</li><li>The New York Fed DSGE model (version 990.2), which was introduced in <a href="http://libertystreeteconomics.newyorkfed.org/2015/05/the-frbny-dsge-model-forecast-april-2015.html">this blog post</a></li><li>The New York Fed DSGE model (version 1002.9), which is documented <a href="https://github.com/FRBNY-DSGE/DSGE.jl/blob/master/docs/DSGE_Model_Documentation_1002.pdf">here</a></li><li>The New York Fed DSGE model (version 1010.18)</li><li>Several methods for model averaging over two models from <a href="https://www.sciencedirect.com/science/article/pii/S0304407616300094#f000005">Del Negro et al. (2016)</a> through the concrete type <code>PoolModel</code>.</li></ul><p>You can run these models using the description provided here. If you were to implement another model using DSGE.jl, these procedures can also be used to estimate those models.</p><h2><a class="nav-anchor" id="Running-with-Default-Settings-1" href="#Running-with-Default-Settings-1">Running with Default Settings</a></h2><p>To estimate and forecast in Julia, simply create an instance of the model object and call <code>estimate</code> and <code>forecast_all</code>. A minimal <a href="https://github.com/FRBNY-DSGE/DSGE.jl/blob/master/docs/examples/run_default.jl">example</a> is reproduced below:</p><pre><code class="language-julia"># estimate as of 2015-Q3 using the default data vintage from 2015 Nov 27
custom_settings = Dict{Symbol, Setting}(
    :data_vintage        =&gt; Setting(:data_vintage, &quot;151127&quot;),
    :date_forecast_start =&gt; Setting(:date_forecast_start, quartertodate(&quot;2015-Q4&quot;)))

# construct a model object
m = Model990(custom_settings = custom_settings)

# reoptimize parameter vector, compute Hessian at mode, and full posterior
# parameter sampling
estimate(m)

# produce LaTeX tables of parameter moments
compute_moments(m)

# forecast and compute means and bands using 10 processes
my_procs = addprocs(10)
@everywhere using DSGE

forecast_one(m, :full, :none, [:forecaststates, :forecastobs])
compute_meansbands(m, :full, :none, [:forecaststates, :forecastobs])
rmprocs(my_procs)</code></pre><p>For more details on changing the model&#39;s default settings, parameters, equilibrium conditions, etc., see <a href="../advanced_usage/#Advanced-Usage-1">Advanced Usage</a>.</p><p>By default, the <code>estimate</code> routine loads the dataset, reoptimizes the initial parameter vector, computes the Hessian at the mode, and conducts full posterior parameter sampling using Metropolis-Hastings. (The initial parameter vector used is specified in the model&#39;s constructor.) Further options for estimation are described in <a href="../estimation/#estimation-step-1">Estimation</a>:</p><ul><li>To use updated data or alternative user-specified datasets, see <a href="../input_data/#input-data-step-1">Input Data</a>.</li><li>The user may want to avoid reoptimizing the parameter vector and calculating the Hessian matrix at this new vector. Please see <a href="../estimation/#estimation-reoptimizing-1">Reoptimizing</a>.</li></ul><p>For more information on the many types of forecasts that can be run on an existing or user-defined model, see <a href="../forecast/#forecast-step-1">Forecasting</a>.</p><h2><a class="nav-anchor" id="Input/Output-Directory-Structure-1" href="#Input/Output-Directory-Structure-1">Input/Output Directory Structure</a></h2><p>The <em>DSGE.jl</em> estimation uses data files as input and produces large data files as outputs. One estimation saves several GB of parameter draws and related outputs. It is useful to understand how these files are loaded/saved and how to control this behavior.</p><h3><a class="nav-anchor" id="Directory-Tree-1" href="#Directory-Tree-1">Directory Tree</a></h3><p>The following subdirectory tree indicates the default locations of these input and outputs. Square brackets indicate directories in the tree that will become relevant as future features are implemented.</p><p><em>Note that this directory tree is not linked, although it appears to be.</em></p><ul><li><a href="../io_dirtree/#dataroot/:-Root-data-directory.-1"><code>&lt;dataroot&gt;/</code>: Root data directory.</a></li><ul><li><a href="../io_dirtree/#data/:-Macroeconomic-input-data-series.-1"><code>data/</code>:  Macroeconomic input data series.</a></li><li><a href="../io_dirtree/#cond/:-Conditional-data,-i.e.-1"><code>cond/</code>: Conditional data, i.e.</a></li><li><a href="../io_dirtree/#user/:-User-created-or-sample-model-input-files.-1"><code>user/</code>: User-created or sample model input files.</a></li></ul><li><a href="../io_dirtree/#saveroot/:-Root-save-directory.-1"><code>&lt;saveroot&gt;/</code>: Root save directory.</a></li><ul><li><a href="../io_dirtree/#output_data/-1"><code>output_data/</code></a></li><ul><li><a href="../io_dirtree/#m990/:-Input/output-files-for-the-Model990-type.-A-model-of-type-SPEC-will-create-its-own-save-directory-SPEC/-at-this-level-in-the-directory-tree.-1"><code>m990/</code>: Input/output files for the <code>Model990</code> type. A model of type <code>SPEC</code> will create its own save directory <code>SPEC/</code> at this  level in the directory tree.</a></li><li><a href="../io_dirtree/#ss0/:-Subdirectory-for-subspec-0.-A-model-of-a-different-subspec-will-have-similar-directories-at-this-level-of-the-tree.-1"><code>ss0/</code>: Subdirectory for subspec 0. A model of a different subspec will have similar directories at this level of the tree.</a></li><ul><li><a href="../io_dirtree/#estimate/-1"><code>estimate/</code></a></li><ul><li><a href="../io_dirtree/#figures/:-Plots-and-other-figures-1"><code>figures/</code>: Plots and other figures</a></li><li><a href="../io_dirtree/#tables/:-LaTeX-tables-1"><code>tables/</code>: LaTeX tables</a></li><li><a href="../io_dirtree/#raw/:-Raw-output-data-from-estimation-step-1"><code>raw/</code>: Raw output data from estimation step</a></li><li><a href="../io_dirtree/#work/:-Derived-data-files-created-using-raw/-files-as-input-1"><code>work/</code>: Derived data files created using <code>raw/</code> files as input</a></li></ul><li><a href="../io_dirtree/#[xxx/]:-Other-model-outputs,-such-as-forecasts,-impulse-response-functions,-and-shock-decompositions;-subdirectory-structure-mirrors-that-of-estimate.-1">[<code>xxx/</code>]: Other model outputs, such as forecasts, impulse response functions, and shock decompositions; subdirectory structure mirrors that of <code>estimate</code>.</a></li></ul></ul></ul></ul><h3><a class="nav-anchor" id="Directory-Paths-1" href="#Directory-Paths-1">Directory Paths</a></h3><p>By default, input/output directories are located in the <em>DSGE.jl</em> package, along with the source code. Default values of the input/output directory roots:</p><ul><li><code>saveroot(m)</code>: <code>&quot;$(Pkg.dir())/DSGE/save&quot;</code></li><li><code>dataroot(m)</code>: <code>&quot;$(Pkg.dir())/DSGE/save/input_data&quot;</code></li></ul><p>Note these locations can be overridden as desired. See <a href="@ref">Model Settings</a> for more details.</p><pre><code class="language-julia">m &lt;= Setting(:saveroot, &quot;path/to/my/save/root&quot;)
m &lt;= Setting(:dataroot, &quot;path/to/my/data/root&quot;)</code></pre><p>Utility functions are provided to create paths to input/output files. These should be used for best results.</p><div class="admonition warning"><div class="admonition-title">Missing docstring.</div><div class="admonition-text"><p>Missing docstring for <code>DSGE.inpath</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition warning"><div class="admonition-title">Missing docstring.</div><div class="admonition-text"><p>Missing docstring for <code>DSGE.rawpath</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition warning"><div class="admonition-title">Missing docstring.</div><div class="admonition-text"><p>Missing docstring for <code>DSGE.logpath</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition warning"><div class="admonition-title">Missing docstring.</div><div class="admonition-text"><p>Missing docstring for <code>DSGE.workpath</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition warning"><div class="admonition-title">Missing docstring.</div><div class="admonition-text"><p>Missing docstring for <code>DSGE.tablespath</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition warning"><div class="admonition-title">Missing docstring.</div><div class="admonition-text"><p>Missing docstring for <code>DSGE.figurespath</code>. Check Documenter&#39;s build log for details.</p></div></div><h2><a class="nav-anchor" id="The-PoolModel-Type-1" href="#The-PoolModel-Type-1">The <code>PoolModel</code> Type</a></h2><p>Unlike the other models contained in DSGE, the <code>PoolModel</code> type is not a proper DSGE model. It is a wrapper object for different methods to average two different models, which do not have to be DSGE models. For example, a user could average two different vector auto-regressions. Generally, a user only needs to provide the predictive density scores of the two models that the user wants to average. The reason is that we treat the predictive density scores as non-FRED observables. This approach makes interfacing with the rest of the machinery provided by DSGE.jl very simple.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DSGE.PoolModel" href="#DSGE.PoolModel"><code>DSGE.PoolModel</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">PoolModel{T}</code></pre><p>Implements several model averaging methods to pool the predictions of different models. Currently, <code>PoolModel</code> only works for pooling two different models, although it can be extended to more models. Confer with the paper for details.</p><p>The available methods are</p><ul><li><p>dynamic: weights on pooled models evolve over time and are          treated as a stochastic process.</p></li><li><p>static:  weights on pooled models are assumed time-invariant.</p></li><li><p>equal:   weights are set to 1/2.</p></li><li><p>bma:     weights are updated according to Bayesian model averaging.</p></li></ul><p>The default method is dynamic, which implements the Dynamic Pools method developed by Del Negro et al. (2016). To choose another method, use the keyword <code>weight_type::Symbol</code>, e.g.</p><pre><code class="language-none">pm = PoolModel(weight_type = :static) # creates a static PoolModel</code></pre><p>The <code>weight_type</code> is stored as a setting, so users can retrieve at any point by using <code>get_setting</code>.</p><p><strong>Fields</strong></p><p><strong>Parameters</strong></p><ul><li><p><code>parameters::Vector{AbstractParameter}</code>: Vector of all time-invariant hyperparameters   for the chosen method of model averaging.</p></li><li><p><code>keys::OrderedDict{Symbol,Int}</code>: Maps human-readable names for predictive densities   of pooled models.</p></li></ul><p><strong>Inputs to Measurement and Equilibrium Condition Equations</strong></p><ul><li><code>model::OrderedDict{Symbol,AbstractDSGEModel}</code>: Maps name to its underlying model object.</li></ul><p><strong>Model Specifications and Settings</strong></p><ul><li><p><code>spec::String</code>: The model specification identifier, &quot;an_schorfheide&quot;, cached here for filepath computation.</p></li><li><p><code>subspec::String</code>: The model subspecification number, indicating that some parameters from the original model spec (&quot;ss0&quot;) are initialized differently. Cached here for filepath computation.</p></li><li><p><code>settings::Dict{Symbol,Setting}</code>: Settings/flags that affect computation without changing the economic or mathematical setup of the model.</p></li><li><p><code>test_settings::Dict{Symbol,Setting}</code>: Settings/flags for testing mode</p></li></ul><p><strong>Other Fields</strong></p><ul><li><p><code>rng::MersenneTwister</code>: Random number generator. Can be is seeded to ensure reproducibility in algorithms that involve randomness (such as Metropolis-Hastings).</p></li><li><p><code>testing::Bool</code>: Indicates whether the model is in testing mode. If <code>true</code>, settings from <code>m.test_settings</code> are used in place of those in <code>m.settings</code>.</p></li><li><p><code>observable_mappings::OrderedDict{Symbol,Observable}</code>: A dictionary that stores data sources, series mnemonics, and transformations to/from model units. DSGE.jl will fetch data from the Federal Reserve Bank of St. Louis&#39;s FRED database; all other data must be downloaded by the user. See <code>load_data</code> and <code>Observable</code> for further details.</p></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/FRBNY-DSGE/DSGE.jl/blob/e32679a86f19e4e02bf97d31182f720159271ee1/src/models/poolmodel/poolmodel.jl#L1-L75">source</a></section><p>See <a href="https://www.sciencedirect.com/science/article/pii/S0304407616300094#f000005">Del Negro et al. (2016)</a> for theoretical details on the model averaging methods listed in the documentation.</p><p>To facilitate analysis with the <code>PoolModel</code> type, we also provide the following functions.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DSGE.estimate_bma" href="#DSGE.estimate_bma"><code>DSGE.estimate_bma</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">estimate_bma(m, data, prior; return_output = false, filestring_addl = [])</code></pre><p>Estimate a Bayesian Model Average.</p><p><strong>Arguments:</strong></p><ul><li><code>m::PoolModel</code>: PoolModel object</li></ul><p><strong>Optional Arguments:</strong></p><ul><li><code>data</code>: well-formed data as <code>Matrix</code> or <code>DataFrame</code>. If this is not provided, the <code>load_data</code> routine will be executed.</li><li><code>prior::Float64</code>: prior probability between the two models</li></ul><p><strong>Keyword Arguments:</strong></p><ul><li><code>return_output::Bool</code>: option to return output. If false, <code>nothing</code> is returned.</li><li><code>filestring_addl::Vector{String}</code>: Additional strings to append to output files.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/FRBNY-DSGE/DSGE.jl/blob/e32679a86f19e4e02bf97d31182f720159271ee1/src/estimate/estimate_bma.jl#L1-L18">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DSGE.sample_λ" href="#DSGE.sample_λ"><code>DSGE.sample_λ</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">sample_λ(m, pred_dens, θs, T = -1; parallel = true) where S&lt;:AbstractFloat
sample_λ(m, pred_dens, T = -1; parallel = true) where S&lt;:AbstractFloat</code></pre><p>Computes and samples from the conditional density p(λ<em>t|θ, I</em>t, P) for particle in <code>θs</code>, which represents the posterior distribution. The sampled λ particles represent the posterior distribution p(λ<em>{t|t} | I</em>t, P).</p><p>If no posterior distribution is passed in, then the function computes the distribution of λ_{t|t} for a static pool.</p><p><strong>Inputs</strong></p><ul><li><code>m::PoolModel{S}</code>: <code>PoolModel</code> object</li><li><code>pred_dens::Matrix{S}</code>: matrix of predictive densities</li><li><code>θs::Matrix{S}</code>: matrix of particles representing posterior distribution of θ</li><li><code>T::Int64</code>: final period for tempered particle filter</li></ul><p>where <code>S&lt;:AbstractFloat</code>.</p><p><strong>Keyword Argument</strong></p><ul><li><code>parallel::Bool</code>: use parallel computing to compute and sample draws of λ</li></ul><p><strong>Outputs</strong></p><ul><li><code>λ_sample::Vector{Float64}</code>: sample of draws of λs; together with (θ,λ) represents a joint density</li></ul><p>```</p></div></div><a class="source-link" target="_blank" href="https://github.com/FRBNY-DSGE/DSGE.jl/blob/e32679a86f19e4e02bf97d31182f720159271ee1/src/analysis/moments.jl#L840-L871">source</a></section><div class="admonition warning"><div class="admonition-title">Missing docstring.</div><div class="admonition-text"><p>Missing docstring for <code>propagate_λ</code>. Check Documenter&#39;s build log for details.</p></div></div><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DSGE.compute_Eλ" href="#DSGE.compute_Eλ"><code>DSGE.compute_Eλ</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">compute_Eλ(m, h, λvec, θmat = [], weights = [];
    current_period = true, parallel = true) where T&lt;:AbstractFloat</code></pre><p>Computes and samples from the conditional density p(λ<em>t|θ, I</em>t, P) for particle in <code>θs</code>, which represents the posterior distribution.</p><p><strong>Inputs</strong></p><ul><li><code>m::PoolModel{T}</code>: <code>PoolModel</code> object</li><li><code>h::Int64</code>: forecast horizon</li><li><code>λvec::Vector{T}</code>: vector of particles of λ samples from (θ,λ) joint distribution</li><li>`θmat::Matrix{T}&#39;: matrix of posterior parameter samples</li><li><code>weights::Vector{T}</code>: weights of λ particles, defaults to equal weights</li></ul><p><strong>Keyword Argument</strong></p><ul><li><code>current_period::Bool</code>: compute Eλ for current period t</li><li><code>parallel::Bool</code>: use parallel computing to compute and sample λ</li><li><code>get_dpp_pred_dens::Bool</code>: compute predictive densities according to dynamic prediction pools</li></ul><p><strong>Outputs</strong></p><ul><li><code>λhat_tplush::Float64</code>: E[λ<em>{t+h|t} | I</em>t^P, P]</li><li><code>λhat_t::Float64</code>: E[λ<em>{t|t} | I</em>t^P, P]</li></ul><p>```</p></div></div><a class="source-link" target="_blank" href="https://github.com/FRBNY-DSGE/DSGE.jl/blob/e32679a86f19e4e02bf97d31182f720159271ee1/src/analysis/moments.jl#L956-L984">source</a></section><footer><hr/><a class="previous" href="../model_design/"><span class="direction">Previous</span><span class="title">Model Design</span></a><a class="next" href="../advanced_usage/"><span class="direction">Next</span><span class="title">Advanced Usage</span></a></footer></article></body></html>
